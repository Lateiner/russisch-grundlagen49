<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Russisch-Memory: Farbige Imperativ-Paare</title>
    <script src="https://cdn.jsdelivr.net/npm/drag-drop-touch@1.3.1/DragDropTouch.js"></script>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --success: #27ae60;
            --error: #e74c3c;
            --bg: #f0f2f5;
            --card-back: #34495e;
            --white: #ffffff;
        }

        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            font-style: normal !important;
            background-color: var(--bg);
            color: var(--primary);
            margin: 0;
            padding: 15px;
            display: flex;
            justify-content: center;
        }

        .container {
            width: 100%;
            max-width: 900px;
            background: var(--white);
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        h1 { text-align: center; color: var(--primary); border-bottom: 3px solid var(--secondary); padding-bottom: 10px; margin-top: 0; }
        
        .intro {
            background: #eef6fc;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 25px;
            text-align: center;
            font-size: 0.95rem;
        }

        /* Memory Grid */
        .memory-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
            gap: 12px;
            perspective: 1000px;
        }

        .memory-card {
            height: 110px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.5s;
            cursor: pointer;
        }

        .memory-card.flipped {
            transform: rotateY(180deg);
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border-radius: 12px;
            border: 2px solid #ddd;
            text-align: center;
            padding: 5px;
            box-sizing: border-box;
            transition: background-color 0.3s, color 0.3s;
        }

        .card-back {
            background-color: var(--card-back);
            color: white;
            font-size: 2rem;
        }

        .card-front {
            background-color: white;
            transform: rotateY(180deg);
            font-style: normal !important;
        }

        .word-text {
            font-size: 1.1rem;
            font-weight: bold;
            font-style: normal !important;
        }

        .aspekt-label {
            font-size: 0.7rem;
            text-transform: uppercase;
            margin-top: 4px;
            font-weight: bold;
            opacity: 0.7;
        }

        .emoji {
            font-size: 1.5rem;
            margin-bottom: 4px;
        }

        /* Standard Match Green */
        .memory-card.matched-manual .card-front {
            background-color: var(--success) !important;
            color: white !important;
            border-color: var(--success);
        }

        /* Error Red */
        .memory-card.error .card-front {
            background-color: var(--error) !important;
            color: white !important;
            border-color: var(--error);
        }

        .controls {
            margin-top: 30px;
            display: flex;
            justify-content: center;
            gap: 15px;
            border-top: 2px solid #eee;
            padding-top: 20px;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            color: white;
            font-size: 1rem;
        }

        .btn-reset { background-color: #95a5a6; }
        .btn-solve { background-color: var(--secondary); }

        @media (max-width: 600px) {
            .memory-grid { grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 8px; }
            .card-face { height: 100px; }
            .word-text { font-size: 0.95rem; }
        }

        /* Kyrillische Schrift explizit schÃ¼tzen */
        span, div, b, button { font-style: normal !important; }
    </style>
</head>
<body>

<div class="container">
    <h1>Imperativ-Memory ðŸ§ </h1>
    
    <div class="intro">
        Klicke zwei Karten an, um die Aspekt-Paare (NSV & SV) zu finden. <br>
        Bei <b>â€žLÃ¶sung anzeigenâ€œ</b> erhÃ¤lt jedes Paar eine eigene Farbe!
    </div>

    <div class="memory-grid" id="grid"></div>

    <div class="controls">
        <button class="btn btn-reset" onclick="initGame()">ðŸ”„ Neues Spiel</button>
        <button class="btn btn-solve" onclick="solveGame()">ðŸ’¡ LÃ¶sung anzeigen</button>
    </div>
</div>

<script>
    const pairs = [
        { nsv: "ÐŸÐ¸ÑˆÐ¸", sv: "ÐÐ°Ð¿Ð¸ÑˆÐ¸", emoji: "âœï¸" },
        { nsv: "Ð§Ð¸Ñ‚Ð°Ð¹", sv: "ÐŸÑ€Ð¾Ñ‡Ð¸Ñ‚Ð°Ð¹", emoji: "ðŸ“–" },
        { nsv: "Ð—Ð²Ð¾Ð½Ð¸", sv: "ÐŸÐ¾Ð·Ð²Ð¾Ð½Ð¸", emoji: "ðŸ“ž" },
        { nsv: "ÐŸÐ¾ÐºÑƒÐ¿Ð°Ð¹", sv: "ÐšÑƒÐ¿Ð¸", emoji: "ðŸ›’" },
        { nsv: "ÐžÑ‚ÐºÑ€Ñ‹Ð²Ð°Ð¹", sv: "ÐžÑ‚ÐºÑ€Ð¾Ð¹", emoji: "ðŸ”“" },
        { nsv: "Ð‘ÐµÑ€Ð¸", sv: "Ð’Ð¾Ð·ÑŒÐ¼Ð¸", emoji: "ðŸ¤²" },
        { nsv: "ÐŸÐ¾Ð¼Ð¾Ð³Ð°Ð¹", sv: "ÐŸÐ¾Ð¼Ð¾Ð³Ð¸", emoji: "ðŸ¤" },
        { nsv: "Ð“Ð¾Ð²Ð¾Ñ€Ð¸", sv: "Ð¡ÐºÐ°Ð¶Ð¸", emoji: "ðŸ’¬" },
        { nsv: "Ð’Ñ…Ð¾Ð´Ð¸", sv: "Ð’Ð¾Ð¹Ð´Ð¸", emoji: "ðŸšª" },
        { nsv: "Ð¡Ð°Ð´Ð¸ÑÑŒ", sv: "Ð¡ÑÐ´ÑŒ", emoji: "ðŸª‘" },
        { nsv: "ÐŸÐµÐ¹", sv: "Ð’Ñ‹Ð¿ÐµÐ¹", emoji: "â˜•" },
        { nsv: "Ð•ÑˆÑŒ", sv: "Ð¡ÑŠÐµÑˆÑŒ", emoji: "ðŸ¥£" }
    ];

    // Palette fÃ¼r die LÃ¶sung (helle Farben fÃ¼r gute Lesbarkeit)
    const pairColors = [
        "#FFD1DC", "#B2E2F2", "#C1E1C1", "#FDFD96", 
        "#E6E6FA", "#FFCC99", "#D1FFD1", "#FFD1FF", 
        "#AFEEEE", "#F0E68C", "#E0FFFF", "#FFE4E1"
    ];

    let flippedCards = [];
    let lockBoard = false;

    function shuffle(array) {
        return array.sort(() => Math.random() - 0.5);
    }

    function createCard(word, type, emoji, pairIndex) {
        const card = document.createElement('div');
        card.className = 'memory-card';
        card.dataset.pair = pairIndex;
        
        card.innerHTML = `
            <div class="card-face card-back">?</div>
            <div class="card-face card-front">
                <span class="emoji">${emoji}</span>
                <span class="word-text">${word}</span>
                <span class="aspekt-label">${type}</span>
            </div>
        `;
        
        card.addEventListener('click', flipCard);
        return card;
    }

    function initGame() {
        const grid = document.getElementById('grid');
        grid.innerHTML = '';
        flippedCards = [];
        lockBoard = false;

        let deck = [];
        pairs.forEach((p, idx) => {
            deck.push({ word: p.nsv, type: 'NSV', emoji: p.emoji, pairIndex: idx });
            deck.push({ word: p.sv, type: 'SV', emoji: p.emoji, pairIndex: idx });
        });

        shuffle(deck).forEach(item => {
            grid.appendChild(createCard(item.word, item.type, item.emoji, item.pairIndex));
        });
    }

    function flipCard() {
        if (lockBoard) return;
        if (this === flippedCards[0]) return;
        if (this.classList.contains('flipped')) return;

        this.classList.add('flipped');
        flippedCards.push(this);

        if (flippedCards.length === 2) {
            checkMatch();
        }
    }

    function checkMatch() {
        const [card1, card2] = flippedCards;
        const isMatch = card1.dataset.pair === card2.dataset.pair;

        if (isMatch) {
            card1.classList.add('matched-manual');
            card2.classList.add('matched-manual');
            flippedCards = [];
        } else {
            lockBoard = true;
            card1.classList.add('error');
            card2.classList.add('error');
            
            setTimeout(() => {
                card1.classList.remove('flipped', 'error');
                card2.classList.remove('flipped', 'error');
                flippedCards = [];
                lockBoard = false;
            }, 1000);
        }
    }

    function solveGame() {
        const cards = document.querySelectorAll('.memory-card');
        
        cards.forEach(card => {
            const pairIdx = card.dataset.pair;
            const color = pairColors[pairIdx % pairColors.length];
            const front = card.querySelector('.card-front');
            
            // Setze individuelle Paarfarbe
            front.style.backgroundColor = color;
            front.style.borderColor = color;
            front.style.color = "#000"; // Schwarze Schrift auf hellen Farben
            
            card.classList.add('flipped');
            // Entferne manuelle Match-Klasse, damit die individuelle Farbe sichtbar ist
            card.classList.remove('matched-manual');
        });
    }

    // Initialisierung
    initGame();
</script>

</body>
</html>